<!DOCTYPE html>
<html lang="en">
<head>
    <title>Learning Twitter Bootstrap</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" href="css/font-awesome.css">
</head>
<body>
    <div id="rowoptions">
         <div class="row">
                <div class="span12 offset1">
                    <div class="btn-toolbar">
                        <div class="btn-group">
                            <button class="btn addcol" data-length="1"><i class="icon-plus "></i>Add Column</button>
                            <button class="btn addcol" data-length="2"><i class="icon-plus "></i>span2</button>
                            <button class="btn addcol" data-length="4"><i class="icon-plus "></i>span4</button>
                            <button class="btn addcol" data-length="6"><i class="icon-plus "></i>span6</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn" id="addrowabove"><i class="icon-plus "></i>Row Above <i class="icon-caret-up"></i></button>
                            <button class="btn" id="addrowbelow"><i class="icon-plus "></i>Row Below <i class="icon-caret-down"></i></button>
                            <button class="btn" id="deleterow"><i class="icon-remove icon-large"></i>Row</button>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div id="coloptions">
        <div class="row">
            <div class="span6">
                 <div class="btn-group">
                    <button class="btn" id="increasewidth"><i class="icon-chevron-up"></i> Width</button>
                    <button class="btn" id="decreasewidth"><i class="icon-chevron-down"></i> Width</button>
                    <button class="btn" id="deletecol"><i class="icon-remove"></i>Col</button>
                    <button class="btn" id="addanothercol"><i class="icon-plus"></i>Col<i class="icon-arrow-right"></i></button>
                    <button class="btn" id="increaseoffset"><i class="icon-chevron-right"></i>Offset</button>
                    <button class="btn" id="decreaseoffset"><i class="icon-chevron-left"></i>Offset</button>
                    <button class="btn" id="addsubrow"><i class="icon-plus"></i>Subrow</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="uppermargin"></div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2" id="side-column">
                <div class="btn-group">
                    <button class="btn">A</button>
                </div>
            </div>
            <div class="span10" id="main-container">
                <div class="row-fluid">
                    <div class="span2"></div>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript" src="builder/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">
    var optionJSON = {
    "popover":{
        title : "Hey"
    }
}
var stringData = {
    "rowhtml":'<div class="row-fluid">\n</div>',
    "colhtml1":'<div class="span1">\n</div>',
    "colhtml2":'<div class="span2">\n</div>',
    "colhtml4":'<div class="span4">\n</div>',
    "colhtml6":'<div class="span6">\n</div>'
}
var inSelectionObject = {};
</script>
<script type="text/javascript" src="functions.js"></script>
<script type="text/javascript">
jQuery(document).ready(function  ($) {//prevent any conflicts
    /*
    After Going Live
    $.getJSON('string.json',function  (jsonData) {
          stringData = jsonData;
          console.log(stringData);
        });
        $.getJSON('options.json',function  (data) {
            optionData = data;
        });
        */

        //Global Variables
        var $container = $('#main-container');
        var rowhtml = stringData.rowhtml;
        var firstRow = $container.children('.row-fluid');
        $('#addrowabove').on('click',function  () {
            var $row = $(this);
            $(rowhtml).insertBefore(inSelectionObject.row);
            inControlBox(inSelectionObject.row.prev('.row-fluid'),'row');
            console.log('Added row Above');
        });
        $('#addrowbelow').on('click',function  () {
            var $row = $(this);
            $(rowhtml).insertAfter(inSelectionObject.row);
            inControlBox(inSelectionObject.row.next('.row-fluid'),'row');
            console.log('Added Row Below');
        });
        $('#deleterow').on('click',function  () {
            inSelectionObject.row.remove();

            //If-Else Loops to check which row is in ControlBox
            if (inSelectionObject.row.next('.row-fluid').length!==0) {//If there is a row below
                inControlBox(inSelectionObject.row.next('.row-fluid'),'row');
            } else{
                if (inSelectionObject.row.prev('.row').length!==0) {//If there is a row above
                    inControlBox(inSelectionObject.row.prev('.row-fluid'),'row');
                } else{
                    //alert('You will have no rows Left');
                };
            };
            console.log('Delete Row Clicked');
        });
        $('.addcol').on('click',function  () {
            var colLength = parseInt($(this).attr('data-length'));
            var colhtml = stringData["colhtml"+colLength];
            console.log(colhtml);
            inSelectionObject.row.append(colhtml);
        });
        $container.on('click','[class*="span"]',function  () {

            inControlBox($(this),'col');
            console.log('Col Clicked');
        });
        $container.on('click','.row-fluid',function  (e) {
            if ($(e.target).hasClass('row-fluid')) {//necessary for click position
                console.log('row Clicked');
                inControlBox($(this),'row');
            };
        });
        $('#increasewidth').on('click',function  () {
            changeWidthThroughClass(inSelectionObject.col,'span',true);
        });
        $('#decreasewidth').on('click',function  () {
            changeWidthThroughClass(inSelectionObject.col,'span',false);
        });
        $('#addanothercol').on('click',function  () {
            var $row = inSelectionObject.col.parent();
            $row.append(stringData.colhtml1);
        });
        $('#deletecol').on('click',function  () {
            inSelectionObject.col.remove();
            //function to transfer control Box to another Column
        });
        $('#increaseoffset').on('click',function  () {
            //inSelectionObject.col.remove();
            changeWidthThroughClass(inSelectionObject.col,'offset',true)
            //function to transfer control Box to another Column
        });
        //selectRow(firstRow);
        //firstRow.click();
});
</script>
</body>
</html>