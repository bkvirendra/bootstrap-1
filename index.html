<!DOCTYPE html>
<html lang="en">
<head>
    <title>Learning Twitter Bootstrap</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
    <div id="rowoptions">
         <div class="row">
                <div class="span10 offset2">
                    <div class="btn-toolbar">
                        <div class="btn-group">
                            <button class="btn addcol" data-length="1">Add Column</button>
                            <button class="btn addcol" data-length="2">span2</button>
                            <button class="btn addcol" data-length="4">span4</button>
                            <button class="btn addcol" data-length="6">span6</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn" id="addrowabove">Add Row Above</button>
                            <button class="btn" id="addrowbelow">Add Row Below</button>
                            <button class="btn" id="deleterow">Delete Selected Row</button>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div id="coloptions">
        <div class="row"></div>
    </div>
    <div class="row" id="uppermargin"></div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2" id="side-column">
                <div class="btn-group">
                    <button class="btn">A</button>
                </div>
            </div>
            <div class="span10" id="main-container">
                <div class="row-fluid">
                    <div class="span2"></div>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript" src="builder/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">
    var optionJSON = {
    "popover":{
        title : "Hey"
    }
}
var stringData = {
    "rowhtml":'<div class="row-fluid">\n</div>',
    "colhtml1":'<div class="span1">\n</div>',
    "colhtml2":'<div class="span2">\n</div>',
    "colhtml4":'<div class="span4">\n</div>',
    "colhtml6":'<div class="span6">\n</div>'
}
var inSelectionObject = {};
</script>
<script type="text/javascript" src="functions.js"></script>
<script type="text/javascript">
jQuery(document).ready(function  ($) {//prevent any conflicts
    /*
    After Going Live
    $.getJSON('string.json',function  (jsonData) {
          stringData = jsonData;
          console.log(stringData);
        });
        $.getJSON('options.json',function  (data) {
            optionData = data;
        });
        */

        //Global Variables
        var $container = $('#main-container');
        var rowhtml = stringData.rowhtml;
        var firstRow = $container.children('.row-fluid');
        $('#addrowabove').on('click',function  () {
            var $row = $(this);
            $(rowhtml).insertBefore(inSelectionObject.row);
            inControlBox(inSelectionObject.row.prev('.row-fluid'));
            console.log('Added row Above');
        });
        $('#addrowbelow').on('click',function  () {
            var $row = $(this);
            $(rowhtml).insertAfter(inSelectionObject.row);
            inControlBox(inSelectionObject.row.next('.row-fluid'));
            console.log('Added Row Below');
        });
        $('#deleterow').on('click',function  () {
            inSelectionObject.row.remove();

            //If-Else Loops to check which row is in ControlBox
            if (inSelectionObject.row.next('.row-fluid').length!==0) {//If there is a row below
                inControlBox(inSelectionObject.row.next('.row-fluid'));
            } else{
                if (inSelectionObject.row.prev('.row').length!==0) {//If there is a row above
                    inControlBox(inSelectionObject.row.prev('.row-fluid'));
                } else{
                    //alert('You will have no rows Left');
                };
            };
            console.log('Delete Row Clicked');
        });
        $('.addcol').on('click',function  () {
            var colLength = parseInt($(this).attr('data-length'));
            var colhtml = stringData["colhtml"+colLength];
            console.log(colhtml);
            inSelectionObject.row.append(colhtml);
        });
        $container.on('click','.row-fluid',function  () {
            console.log('row Clicked');
            inControlBox($(this));
        });
        $container.on('click','[class*="span"]',function  () {
            $('#rowoptions').hide();
            console.log('Col Clicked',$(this));
        });
        //selectRow(firstRow);
        //firstRow.click();
});
</script>
</body>
</html>