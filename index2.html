<!DOCTYPE html>
<html lang="en">
<head>
    <title>Learning Twitter Bootstrap</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" href="css/font-awesome.css">
</head>
<body>
    <div id="rowoptions" class="optionbox">
         <div class="row">
                <div class="span12 offset1">
                    <div class="btn-toolbar">
                        <div class="btn-group">
                            <button class="btn addcol" data-length="1"><i class="icon-plus "></i>Add Column</button>
                            <button class="btn addcol" data-length="2"><i class="icon-plus "></i>span2</button>
                            <button class="btn addcol" data-length="4"><i class="icon-plus "></i>span4</button>
                            <button class="btn addcol" data-length="6"><i class="icon-plus "></i>span6</button>
                        </div>
                        <div class="btn-group">
                            <button class="btn" id="addrowabove"><i class="icon-plus "></i>Row <i class="icon-caret-up"></i></button>
                            <button class="btn" id="addrowbelow"><i class="icon-plus "></i>Row <i class="icon-caret-down"></i></button>
                            <button class="btn" id="deleterow"><i class="icon-remove icon-large"></i>Row</button>
                            <button class="btn closebox"><i class="icon-off"></i>Close</button>
                        </div>
                    </div>
                </div>
            </div>
    </div>
      <div id="coloptions" class="optionbox">
        <div class="row">
            <div class="span7">
                 <div class="btn-group">
                    <button class="btn" id="increasewidth"><i class="icon-chevron-up"></i> Width</button>
                    <button class="btn" id="decreasewidth"><i class="icon-chevron-down"></i> Width</button>
                    <button class="btn" id="increaseoffset"><i class="icon-chevron-right"></i>Offset</button>
                    <button class="btn" id="decreaseoffset"><i class="icon-chevron-left"></i>Offset</button>
                    <button class="btn" id="addcomponent"><i class="icon-asterisk">component</i></button>
                    <button class="btn" id="addanothercol"><i class="icon-plus"></i>Col<i class="icon-arrow-right"></i></button>
                    <button class="btn" id="addsubrow"><i class="icon-plus"></i>Subrow</button>
                    <button class="btn" id="deletecol"><i class="icon-remove"></i>Col</button>
                    <button class="btn closebox"><i class="icon-off"></i>Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="componentoptions" class="optionbox">
        <div class="row">
            <div class="span5">
                <div class="btn-group">
                    <button class="btn" data-id="dropdown">DropDown</button>
                    <button class="btn" data-id="typography">Typography</button>
                    <button class="btn" data-id="navbar">Navbar</button>
                    <button class="btn" data-id="buttongroup">buttongroup</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="uppermargin"></div>
        <div class="container-fluid">
        <div class="row-fluid">
            <div class="span4" id="side-column">

                    <!--EDITING OF THE CODE-->
                        <form><textarea class="zc-syntax-xsl zc-use_tab-true zc-pretty_break-true" cols="30" name="completeeditor" id="completeeditor">
<div class="row-fluid"></div>
</textarea></form>
            </div>
            <!--LIVE VIEW OF THE CODE-->
            <div class="span6" id="main-container">
                <div class="row-fluid">
                    <div class="span2"></div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jquery.min.js"></script>
<script defer type="text/javascript" src="js/bootstrap.min.js"></script>
<script defer type="text/javascript" src="js/zen_textarea.min.js"></script>
<script defer type="text/javascript" src="functions.js"></script>
<script defer type="text/javascript" src="livesync.js"></script>
<script defer type="text/javascript" src="js/beautify-html.js"></script>

<script defer>
    var stringData = {
    "rowhtml":'\n<div class="row-fluid">\n</div>\n',
    "colhtml1":'\n<div class="span1">\n</div>\n',
    "colhtml2":'\n<div class="span2">\n</div>\n',
    "colhtml4":'\n<div class="span4">\n</div>\n',
    "colhtml6":'\n<div class="span6">\n</div>\n',
    "subrowhtml":'\n<div class="row-fluid">\n</div>\n',
    "dropdown":'\n<div class="dropdown">\n<a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>\n\t<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n\t\t<li><a tabindex="-1" href="#">Action</a></li>\n\t\t<li><a tabindex="-1" href="#">Another action</a></li>\n\t\t<li><a tabindex="-1" href="#">Something else here</a></li>\n\t\t<li class="divider"></li>\n\t\t<li><a tabindex="-1" href="#">Separated link</a></li>\n\t</ul>\n</div>\n',
    "typography":'\n<div class="hero-unit">\n\t<h1>Heading</h1>\n\t<p>Tagline</p>\n\t<p>\n\t\t<a class="btn btn-primary btn-large">\n\t\tLearn more\n\t\t</a>\n\t</p>\n</div>\n',
    "navbar":'\n<div class="navbar">\n<div class="navbar-inner">\n<a class="brand" href="#">Title</a>\n<ul class="nav">\n<li class="active">\t\t<a href="#">Home</a></li>\n<li><a href="#">Link</a></li>\n<li><a href="#">Link</a></li>\n</ul>\n</div>\n</div>\n',
    "buttongroup":'\n<div class="btn-group">\n\t<button class="btn">1</button>\n\t<button class="btn">2</button>\n\t<button class="btn">3</button>\n</div>\n',
    "tabs":'\n<ul class="nav nav-tabs">\n\t<li class="active">\n\t\t<a href="#">Home</a>\n\t</li>\n\t<li><a href="#">...</a></li>\n\t<li><a href="#">...</a></li>\n</ul>\n',
    "navlist":'\n<ul class="nav nav-list">\n<li class="nav-header">List header</li>\n<li class="active"><a href="#">Home</a></li>\n<li><a href="#">Library</a></li>\n...\n</ul>\n',
    "tabbablenav":'\n<div class="tabbable">\n<ul class="nav nav-tabs">\n<li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>\n<li><a href="#tab2" data-toggle="tab">Section 2</a></li>\n</ul>\n<div class="tab-content">\n<div class="tab-pane active" id="tab1">\n<p>I am in Section 1.</p>\n</div>\n<div class="tab-pane" id="tab2">\n<p>Howdy, I am in Section 2.</p>\n</div>\n</div>\n</div>',
    "form":'<form class="navbar-form pull-left">\n<input type="text" class="span2">\n<button type="submit" class="btn">Submit</button>\n</form>'
}
var inSelectionObject = {};
</script>
<script>
$(document).ready(function  () {

    var $container = $('#main-container');

    $container.on('click','[class*="span"]',function  (e) {
        //e.stopPropagation();
        //var theCol = $('[class*="span"]')[$('[class*="span"]').index(this)];

        inSelectionObject.col = $(this);
        inControlBox($(this),'col');

    });
    /**CLICKING ON ROW*/
    $container.on('click','.row-fluid',function  (e) {
        if ($(e.target).hasClass('row-fluid')) {//necessary for click position

           inControlBox($(this),'row');
        };
        inSelectionObject.row = $(this);

    });

    $('#addrowabove').on('click',function  () {
            var $row = $(this);
            $(stringData.rowhtml).insertBefore(inSelectionObject.row);
            inControlBox(inSelectionObject.row.prev('.row-fluid'),'row');

        });
        $('#addrowbelow').on('click',function  () {
            var $row = $(this);
            $(stringData.rowhtml).insertAfter(inSelectionObject.row);
            inControlBox(inSelectionObject.row.next('.row-fluid'),'row');

        });
        $('#deleterow').on('click',function  () {
            inSelectionObject.row.remove();
            removeControlBox();
            /*
            * If-Else Loops to check which row is in ControlBox

            if (inSelectionObject.row.next('.row-fluid').length!==0) {//If there is a row below
                inControlBox(inSelectionObject.row.next('.row-fluid'),'row');
            } else{
                if (inSelectionObject.row.prev('.row').length!==0) {//If there is a row above
                    inControlBox(inSelectionObject.row.prev('.row-fluid'),'row');
                } else{
                    //alert('You will have no rows Left');
                };
            };*/
            console.log('Delete Row Clicked');
        });
    $('.addcol').on('click',function  () {
            /*
            * Write function to check whether overflowing
            */
            var colLength = parseInt($(this).attr('data-length'));
            var colhtml = stringData["colhtml"+colLength];
            inSelectionObject.row.append(colhtml);
        });
        $('#increasewidth').on('click',function  () {
            changeWidthThroughClass(inSelectionObject.col,'span',true);
        });
        $('#decreasewidth').on('click',function  () {

            changeWidthThroughClass(inSelectionObject.col,'span',false);
        });
         $('#addanothercol').on('click',function  () {

            $(stringData.colhtml1).insertAfter(inSelectionObject.col);
        });
        $('#deletecol').on('click',function  () {
            inSelectionObject.col.remove();
            removeControlBox();
        });
        $('#increaseoffset').on('click',function  () {
            changeWidthThroughClass(inSelectionObject.col,'offset',true);
        });
        $('#decreaseoffset').on('click',function  () {
            changeWidthThroughClass(inSelectionObject.col,'offset',false);
        });
        $('#addcomponent').click(function(){
            $('.optionbox').hide();
            $('#componentoptions').show();
        });
        $('#componentoptions').on('click','.btn',function  () {

            var html = stringData[$(this).attr('data-id')];
            inSelectionObject.col.append(html);
            $('#componentoptions').hide();
            inControlBox(inSelectionObject.col,'col');
        });
});
</script>
</html>